# 给无人机跟随小车的仿真添加一个aruco码

跟随视频BV1uk4y1o7Z1添加aruco模型，仿真中手动放置

---

### 启动仿真

```bash
source /home/chen/PX4-Autopilot/Tools/simulation/gazebo-classic/setup_gazebo.bash /home/chen/PX4-Autopilot /home/chen/PX4-Autopilot/build/px4_sitl_default 
export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:/home/chen/PX4-Autopilot
export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:/home/chen/PX4-Autopilot/Tools/simulation/gazebo-classic/sitl_gazebo-classic
roslaunch px4 mavros_posix_sitl_cp.launch
```

```bash
rosrun teleop_twist_keyboard teleop_twist_keyboard.py
```

```bash
rviz
```

---

### GPS数据

```bash
rostopic echo /mavros/global_position/global
```

本地坐标系，单位米

```bash
rostopic echo /mavros/local_position/pose
```

磁罗盘航向角

```bash
rostopic echo /mavros/global_position/compass_hdg
```

---

### 给小车添加aruco码

```bash
cd /home/chen/PX4-Autopilot/launch
cp posix_sitl_cp.launch posix_sitl_aruco.launch
gedit posix_sitl_aruco.launch
```

```bash
cp mavros_posix_sitl_cp.launch mavros_posix_sitl_aruco.launch
gedit mavros_posix_sitl_aruco.launch
```

posix_sitl_cp.launch改为posix_sitl_aruco.launch

```bash
sudo apt-get install ros-neotic-gazebo-ros-pkgs
```

```bash
source /home/chen/PX4-Autopilot/Tools/simulation/gazebo-classic/setup_gazebo.bash /home/chen/PX4-Autopilot /home/chen/PX4-Autopilot/build/px4_sitl_default 
export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:/home/chen/PX4-Autopilot
export ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:/home/chen/PX4-Autopilot/Tools/simulation/gazebo-classic/sitl_gazebo-classic
roslaunch px4 mavros_posix_sitl_aruco.launch
```

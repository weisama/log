# 创建一个功能包，通过offboard模式控制无人机
基于美团低空经济挑战赛的仿真环境25.08.09_gazebo_px4  


---

## offboard模式下飞行的功能包

```bash
mkdir -p ~/ros2_ws/src/offboard_test/src
cd ~/ros2_ws/src/offboard_test
```

```bash
gedit ~/ros2_ws/src/offboard_test/src/offboard_test.cpp
gedit ~/ros2_ws/src/offboard_test/package.xml
gedit ~/ros2_ws/src/offboard_test/CMakeLists.txt
```

---

## 编译

```bash
cd ~/ros2_ws
rm -rf build/offboard_test install/offboard_test
colcon build --packages-select offboard_test
```

---

## 运行

```bash
cd ~/PX4-Autopilot
make px4_sitl gazebo
```

```bash
ros2 run mavros mavros_node --ros-args -p fcu_url:=udp://:14540@127.0.0.1:14557
```

```bash
ros2 run offboard_test offboard_test_node
```
```
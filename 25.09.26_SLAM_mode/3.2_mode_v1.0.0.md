## 从开发中模块到出售模块，版本v1.0.0

**硬件是KICKPI官方的RK3568_K1B**

## 设置脚本开机自启动slam


```
sudo mkdir -p /usr/share/chen
sudo rm -rf /usr/share/chen/install
sudo cp -r ~/slam_ws/install /usr/share/chen/
sudo chmod 777 -R /usr/share/chen
ls /usr/share/chen
```

```bash
sudo nano /usr/share/chen/autostart.sh
```

```bash
#!/bin/bash
# 加载环境
source /opt/ros/humble/setup.bash
source /usr/share/chen/install/setup.bash
# 启动命令
sudo nmcli dev wifi hotspot ifname wlan0 ssid slam_mode password 12345678 &
sleep 1
ros2 launch upper upper_launch.py tcp_ip:=0.0.0.0 tcp_port:=6666 &
sleep 1
ros2 launch lidar_filter lidar_filter_with_driver.launch.py &
sleep 1
ros2 launch rf2o_laser_odometry rf2o_laser_odometry.launch.py publish_tf:=true &
sleep 1
ros2 launch karto_slam online_launch.py &
sleep 1
ros2 launch pose_send pose_send.launch.py &
# 防止脚本退出
while true; do sleep 1000; done
```

```bash
sudo chmod +x /usr/share/chen/autostart.sh
sudo nano /etc/systemd/system/autostart.service
```

```
[Unit]
Description=ROS 2 Autostart Service
After=network.target
[Service]
Type=simple
User=cat
ExecStart=/usr/share/chen/autostart.sh
Restart=on-failure
RestartSec=5s
[Install]
WantedBy=multi-user.target
```

```bash
sudo systemctl daemon-reload
sudo systemctl enable autostart.service
sudo systemctl start autostart.service
```

```bash
sudo systemctl disable autostart.service
sudo systemctl stop autostart.service
```

## 转移代码

```
ls /usr/share/chen
sudo rm -rf /home/cat/*
nano ~/.bashrc
source ~/slam_ws/install/setup.bash
```

```
lsblk
sudo mkdir -p /mnt/tf
sudo mount /dev/mmcblk1p1 /mnt/tf
ls /mnt/tf
cp -rf /mnt/tf/slam_ws ~/
ls ~
```

```
ls ~/.ssh/id_rsa ~/.ssh/id_rsa.pub
rm -rf ~/.ssh/*
ssh -T git@github.com
```

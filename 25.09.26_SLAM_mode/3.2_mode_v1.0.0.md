## 从开发中模块到出售模块，版本v1.0.0

**硬件是KICKPI官方的RK3568_K1B**

## 调整代码位置

```
sudo rm -rf /usr/share/chen
sudo mkdir -p /usr/share/chen
sudo cp -r ~/slam_ws/install /usr/share/chen/
sudo chmod 777 -R /usr/share/chen
ls /usr/share/chen
sudo rm -rf ~/*
```

## 设置脚本开机自启动slam

```bash
sudo nano /usr/share/chen/autostart.sh
```

写入：

```bash
#!/bin/bash
# 加载环境
source /opt/ros/humble/setup.bash
source /usr/share/chen/install/setup.bash
# 启动命令
sudo nmcli dev wifi hotspot ifname wlan0 ssid slam_mode password 12345678 &
sleep 1
ros2 launch upper upper_launch.py tcp_ip:=0.0.0.0 tcp_port:=6666 &
sleep 1
ros2 launch lidar_filter lidar_filter_with_driver.launch.py &
sleep 1
ros2 launch rf2o_laser_odometry rf2o_laser_odometry.launch.py publish_tf:=true &
sleep 1
ros2 launch karto_slam online_launch.py &
sleep 1
ros2 launch px4_launch px4.launch.py &
sleep 1
ros2 run pose_send pose_send_node &
# 防止脚本退出
while true; do sleep 1000; done
```

```bash
sudo chmod +x /usr/share/chen/autostart.sh
```

```bash
sudo nano /etc/systemd/system/autostart.service
```

写入：

```
[Unit]
Description=ROS 2 Autostart Service
After=network.target
[Service]
Type=simple
User=cat
ExecStart=/usr/share/chen/autostart.sh
Restart=on-failure
RestartSec=5s
[Install]
WantedBy=multi-user.target
```

```bash
sudo systemctl daemon-reload
sudo systemctl enable autostart.service
sudo systemctl start autostart.service
```

停止服务

```bash
sudo systemctl stop autostart.service
```

禁用开机自启动

```bash
sudo systemctl disable autostart.service
```

ssh远程登录

复制功能包到ros1容器装载的文件夹
sudo cp path/to/A150_SRC_Melodic /home/wheeltec/ros1_shared_dir

固定串口设备名称
ls -l /dev
gedit wheeltec_robot/src/turn_on_wheeltec_robot/wheeltec_udev.sh

echo 'KERNEL=="ttyCH343USB*", ATTRS{idVendor}=="1a86", ATTRS{idProduct}=="55d4", ATTRS{serial}=="0002", MODE="0777", GROUP="dialout", SYMLINK+="wheeltec_controller"' >/etc/udev/rules.d/wheeltec_controller.rules
service udev reload
sleep 2
service udev restart

sudo chmod 777 wheeltec_robot/src/turn_on_wheeltec_robot/wheeltec_udev.sh
sudo wheeltec_robot/src/turn_on_wheeltec_robot/wheeltec_udev.sh
sudo udevadm control --reload-rules
sudo udevadm trigger
ls -l /dev
输出wheeltec_controller -> ttyCH343USB0

设置X11显示屏幕的编号
echo $DISPLAY
xhost +local:root
进入容器
ros1_restart
ros1
使用树莓派外接屏幕显示
export DISPLAY=:0
apt install -y x11-apps
xeyes

进入容器更新软件
ros1_restart
ros1
sudo wget http://fishros.com/install -O fishros && . fishros
sudo apt update
sudo apt upgrade
设置环境
gedit /root/.bashrc
export DISPLAY=:0
source /home/wheeltec/ros1_shared_dir/A150_SRC_Melodic/devel/setup.bash

修改功能包错误
①xf_mic_asr_offline_circle错误
node_feedback 这个可执行目标已经在 table_arm 包中定义过了，现在又在 xf_mic_asr_offline_circle 包中尝试定义
xf_mic_asr_offline_circle/CMakeLists.txt   :   node_feedback -> node_feedback_xf 
xf_mic_asr_offline_circle/CMakeLists.txt   :   link_directories(lib/x64) -> link_directories(lib/arm64)

②wheeltec_tracker_pkg修改文件路径
curl -L -o /home/wheeltec/haarcascade_frontalface_default.xml https://github.com/opencv/opencv/raw/master/data/haarcascades/haarcascade_frontalface_default.xml
sudo cp /home/wheeltec/haarcascade_frontalface_default.xml /home/wheeltec/ros1_shared_dir/A150_SRC_Melodic/src/wheeltec_tracker_pkg/data
gedit /home/wheeltec/ros1_shared_dir/A150_SRC_Melodic/src/wheeltec_tracker_pkg/src
haar_file_face = "/home/wheeltec/ros1_shared_dir/A150_SRC_Melodic/src/wheeltec_tracker_pkg/data/face.xml";
string cascadeName = "/home/wheeltec/ros1_shared_dir/A150_SRC_Melodic/src/wheeltec_tracker_pkg/data/face.xml";

③web_video_server更换文件
sudo cp path/to/cv_bridgeConfig.cmake /opt/ros/melodic/share/cv_bridge/cmake
sudo gedit /opt/ros/melodic/share/cv_bridge/cmake/cv_bridgeConfig.cmake
set(_include_dirs "include;/usr/include;/usr/include/opencv2")

下载必要的功能包
sudo apt-get install ros-melodic-moveit-msgs
sudo apt-get install ros-melodic-moveit-ros-perception
sudo apt-get install ros-melodic-moveit-ros-planning-interface
sudo apt-get install ros-melodic-ompl ros-melodic-moveit-fake-controller-manager
sudo apt-get install ros-melodic-trac-ik-kinematics-plugin
sudo apt-get install ros-melodic-moveit
更新环境并编译
source /opt/ros/melodic/setup.bash
cd /home/wheeltec/ros1_shared_dir/A150_SRC_Melodic
rosdep install --from-paths src --ignore-src -r -y
catkin_make

添加权限
source /home/wheeltec/ros1_shared_dir/A150_SRC_Melodic/devel/setup.bash
sudo chmod -R 777 /home/wheeltec/ros1_shared_dir

sudo wget http://fishros.com/install -O fishros && . fishros
pip2 install baidu-aip
pip2 install demjson==2.2.4
gedit /home/wheeltec/ros1_shared_dir/A150_SRC_Melodic/src/wheeltec_tracker_pkg/scripts/gesture_recognition.py
118719150
wZCr8y87RJqRxLvcARbP29WT
boIC91XdPeFiKQb4Ek4saPiC8Nz5PzBg
roslaunch wheeltec_tracker_pkg gesture_recognition.launch



0.调整初始位姿
roslaunch table_arm arm_pose_init.launch
rosrun  table_arm arm_teleop_key.py

1.键盘控制机械臂
roslaunch table_arm base_serial.launch
roslaunch wheeltec_arm_rc keyboard_teleop.launch

2.语音控制机械臂
①roslaunch   table_arm   voice_init.launch
②roslaunch   table_arm   voice_control_arm.launch

3.色块分拣
roslaunch  table_arm  sort_color.launch

4.色块码垛
roslaunch  table_arm  stack_color.launch

5.ar标签分拣
roslaunch  table_arm  sort_ar.launch

6.ar标签码垛
roslaunch  table_arm  stack_ar.launch

7.人脸跟随
roslaunch  wheeltec_tracker_pkg   face_tracking.launch

8.色块跟随
roslaunch wheeltec_tracker_pkg  color_tracking.launch

9.手势识别
roslaunch wheeltec_tracker_pkg gesture_recognition.launch

10.HSV阈值调参
roslaunch table_arm color_hsv_adjust.launch

11.机械臂虚拟空间避障
roslaunch table_arm virtual_space_bostacle_avoidance.launch 

12.机械臂正解例程
roslaunch  arm_demo  fk_demo.launch

13.机械臂逆解例程
roslaunch  arm_demo  ik_demo.launch

14.机械臂笛卡尔空间路径
roslaunch arm_demo cartesian_demo.launch

15.WHEELTEC APP图传
//用户手机连接小车wifi，打开APP即可使用。该APP可控制小车移动、保存地图、查看摄像头画面，详见WHEELTEC APP功能教程
//图传，需要手动打开RGB摄像头节点：roslaunch usb_cam usb_cam-test.launch
APP端可以实时观看到摄像头后面

16.WEB浏览器显示摄像头
主机：roslaunch usb_cam usb_cam-test.launch
          rosrun web_video_server web_video_server
主机网页查看：http://localhost:8080/ (发出热点的为主机)
客户机网页查看：http://192.168.0.100:8080 (连接热点的为客户机)
【注】建议使用谷歌浏览器，经测试360极速浏览器、IE浏览器无法打开图像

------------------------------------------
其它常用命令

递归修改当前(终端)文件夹下文件修改时间：
find ./* -exec touch {} \;

在工作空间下运行，安装ROS功能包全部依赖：
rosdep install --from-paths src --ignore-src -r -y

指定功能包编译：
catkin_make -DCATKIN_WHITELIST_PACKAGES="功能包名"
解除指定功能包编译：
catkin_make -DCATKIN_WHITELIST_PACKAGES=""

使用豆瓣源进行pip安装(网速会快很多)：
pip install -i https://pypi.doubanio.com/simple/ python包名

ssh登录：
ssh -Y wheeltec@192.168.0.100

nfs挂载:
sudo mount -t nfs 192.168.0.100:/home/wheeltec/wheeltec_arm  /mnt
nfs解除挂载:
sudo umount -t nfs 192.168.0.100:/home/wheeltec/wheeltec_arm  /mnt

启动初始化节点：
roslaunch turn_on_wheeltec_robot turn_on_wheeltec_robot.launch



打开RGB摄像头
roslaunch usb_cam usb_cam-test.launch
rqt_image_view

查看节点与话题关系
rqt_graph

生成TF树pdf
rosrun tf view_frames
查看TF树
rosrun rqt_tf_tree rqt_tf_tree



# 无人机吊载课题

实物是超维空间科技M0-F250（小型，已停产）、M1-F410（碳架）  
机载电脑是树莓派4b，超维空间科技使用的是ubuntu-18.04  
系统的内核无法适配新版本树莓派4b，故树莓派选择ubuntu22  
飞控是pixhawk，PX4-1.13.3,本机使用docker容器编译运行PX4源码,见25.03.03_docker_gazebo  

---

### 机载电脑树莓派4b安装ubuntu22桌面系统

[参考教程](https://blog.csdn.net/weixin_49818157/article/details/127726569?spm=1001.2014.3001.5506)

1. 下载清华园镜像  
   [镜像地址](https://mirrors.tuna.tsinghua.edu.cn/ubuntu-cdimage/ubuntu/releases/22.04.5/release/ubuntu-22.04.5-preinstalled-desktop-arm64%2Braspi.img.xz)

2. 解压镜像  
   ```bash
   xz -d '/home/chen/备份/ubuntu-22.04.5-preinstalled-desktop-arm64+raspi.img.xz'
   ```

3. 下载烧录软件  
   [烧录软件地址](http://raspberrypi.com/software/)

4. 一键安装ROS环境（可选）  
   ```bash
   sudo wget http://fishros.com/install -O fishros && . fishros
   ```

5. 更新系统  
   ```bash
   sudo apt update
   sudo apt upgrade
   ```

6. 安装常用工具  
   ```bash
   sudo apt install gedit
   sudo apt install git
   ```

---

### SSH连接配置

#### 树莓派端

安装并启动SSH服务  
```bash
sudo apt install openssh-server -y
sudo systemctl enable --now ssh
```

查看IP地址  
```bash
ip a
```

#### 本机端

连接树莓派  
```bash
ssh -Y chen@192.168.110.234
```

---

### X11转发窗口配置

#### 树莓派

安装X11相关组件  
```bash
sudo apt install xauth x11-apps -y
```

编辑SSH配置文件  
```bash
sudo nano /etc/ssh/sshd_config
```

添加或修改以下内容：  
```
X11Forwarding yes
X11DisplayOffset 10
X11UseLocalhost no
```

重启SSH服务  
```bash
sudo systemctl restart ssh
```

#### 本机

安装xauth  
```bash
sudo apt install xauth -y
```

连接树莓派（支持X11转发）  
```bash
ssh -Y chen@192.168.110.234
# 或
ssh -Y chen@192.168.110.14
```

检查DISPLAY变量  
```bash
echo $DISPLAY
export DISPLAY=chen-desktop:10.0
```

测试X11转发  
```bash
xeyes
```
